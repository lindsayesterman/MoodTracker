(this.webpackJsonpmoodTracker=this.webpackJsonpmoodTracker||[]).push([[0],{112:function(e,t,a){},116:function(e,t,a){},119:function(e,t,a){},124:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){},128:function(e,t,a){},234:function(e,t,a){},235:function(e,t,a){"use strict";a.r(t);var o=a(1),s=a.n(o),n=a(103),r=a.n(n),d=a(31),c=(a(112),a(35)),i=a(104),l=(a(113),a(236),i.a.initializeApp({apiKey:"AIzaSyBiKFyl668YCSTzRy9NaMLTg4nKYu6siWw",authDomain:"shimmer-mood-tracker-900b2.firebaseapp.com",projectId:"shimmer-mood-tracker-900b2",storageBucket:"shimmer-mood-tracker-900b2.appspot.com",messagingSenderId:"747982194591",appId:"1:747982194591:web:92fbda0e644e1ccf005faa",measurementId:"G-FM28QHTM1W"})),g=(a(116),a(2)),h=s.a.createContext(),p=function(e){var t=e.children,a=Object(o.useState)(!0),s=Object(c.a)(a,2),n=s[0],r=s[1],d=Object(o.useState)(null),i=Object(c.a)(d,2),p=i[0],u=i[1];return Object(o.useEffect)((function(){l.auth().onAuthStateChanged((function(e){if(e){var t=e.uid;l.firestore().collection("users").doc(t).set({email:e.email})}u(e),r(!1)}))}),[]),n?Object(g.jsx)("p",{children:"Loading..."}):Object(g.jsx)(h.Provider,{value:{currentUser:p},children:t})},u=a(16),b=a(20),j=a.n(b),m=a(36),f=a(6),x=a(7),M=a(24),O=a(10),v=a(9),k=(a(119),a(11)),T=a(239);var D=function(){var e=Object(o.useContext)(h).currentUser;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("h1",{children:"Home"}),e?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("p",{children:"You are logged in"}),Object(g.jsx)(d.b,{to:"/",children:"Select Mood Now"}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("button",{onClick:function(){l.auth().signOut()},children:"Sign out"})]}):Object(g.jsxs)("p",{children:[Object(g.jsx)(d.b,{to:"/login",children:"Log In"})," or"," ",Object(g.jsx)(d.b,{to:"/signup",children:"Sign Up"})]})]})};function w(e){return Object(o.useContext)(h).currentUser?Object(g.jsx)(k.a,{to:"/"}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("h1",{children:"Log In"}),Object(g.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=e.target.elements,a=t.email,o=t.password;try{l.auth().signInWithEmailAndPassword(a.value,o.value)}catch(s){alert(s)}},children:[Object(g.jsx)("input",{type:"email",placeholder:"Email",name:"email"}),Object(g.jsx)("input",{type:"password",name:"password",placeholder:"Password"}),Object(g.jsx)("button",{type:"submit",children:"Submit"})]})]})}var C=function(e){var t=Object(o.useState)(null),a=Object(c.a)(t,2),s=a[0],n=a[1];return s?Object(g.jsx)(k.a,{to:"/"}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("h1",{children:"Sign Up"}),Object(g.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=e.target.elements,a=t.email,o=t.password;try{l.auth().createUserWithEmailAndPassword(a.value,o.value),n(!0)}catch(s){alert(s)}},children:[Object(g.jsx)("input",{onChange:e.getUserEmail,id:"email",value:e.email,type:"email",name:"email",placeholder:"Email"}),Object(g.jsx)("input",{type:"password",name:"password",placeholder:"Password"}),Object(g.jsx)("button",{type:"submit",children:"Submit"})]})]})},y=(a(124),a.p+"static/media/faceOne.fa6837e5.svg"),E=a.p+"static/media/faceTwo.5db194b7.svg",S=a.p+"static/media/faceThree.f0df2ab2.svg",A=a.p+"static/media/faceFour.6b41455b.svg",N=a.p+"static/media/faceFive.e3f855ef.svg",F=a.p+"static/media/shimmerStar.c8bbbf27.svg";a(125);function L(){return Object(g.jsxs)("div",{children:[Object(g.jsx)("img",{alt:"star",className:"bottomLeftLarge",src:F}),Object(g.jsx)("img",{alt:"star",className:"topRightLarge",src:F}),Object(g.jsx)("img",{alt:"star",className:"topRightBottom",src:F}),Object(g.jsx)("img",{alt:"star",className:"topRightTop",src:F}),Object(g.jsx)("img",{alt:"star",className:"bottomLeftBottom",src:F}),Object(g.jsx)("img",{alt:"star",className:"bottomLeftTop",src:F})]})}a(126);var W=function(e){return Object(g.jsx)("span",{className:"emoji",role:"img","aria-label":e.label?e.label:"","aria-hidden":e.label?"false":"true",children:e.symbol})},B=a(238),I=a.p+"static/media/backBtn.2e262040.svg";a(127);function R(e){return Object(g.jsx)("img",{alt:"back button",className:"backBtn",src:I})}a(128);var G=a(80),U=a.p+"static/media/lineGraphBtn.4a88dd84.svg",V=a.p+"static/media/barGraphBtn.0d30f57a.svg",H=(a(234),function(e){return 1===(e=parseFloat(e))?"Extremely Sad":2===e?"Sad":3===e?"Neutral":4===e?"Happy":5===e?"Extremely Happy":void 0});function Y(e){if(0===e.length)return-1;for(var t=e[0],a=0,o=1;o<e.length;o++)e[o]>t&&(a=o,t=e[o]);return a}var z=function(e,t){if(e.length>0){var a=[];if("allTime"===t)for(var o=0;o<e.length;o++)for(var s=0;s<e[o].tags.length;s++)a.push(e[o].tags[s]);else for(var n=0;n<t.length;n++)for(var r=0;r<t[n].length;r++)a.push(t[n][r]);var d,c=[],i=[];a.sort();for(var l=0;l<a.length;l++)a[l]!==d?(c.push(a[l]),i.push(1)):i[i.length-1]++,d=a[l];var g=[c,i],h=Y(g[1]),p=g[0].splice(h,1),u=g[1].splice(h,1);u=Y(g[1]);var b=g[0].splice(u,1);return p.length>0&&b.length>0&&"allTime"===t?p+", "+b:p.length>0?p:"No tags selected yet."}},J=function(e){if(!(e.length>0))return"Happy";for(var t=0;t<e.length;t++){e.sort((function(e,t){return e-t}));for(var a=1,o=e[0].feeling,s=1,n=e[0].feeling,r=1;r<e.length;r++)e[r-1].feeling!==e[r].feeling&&(s>a&&(a=s,o=n),s=0,n=e[r].feeling),s++;return H(s>a?n:o)}};function P(e){return Object(g.jsxs)("div",{className:"statBox",children:[Object(g.jsx)("h3",{children:"Your most common stats"}),Object(g.jsxs)("div",{className:"boxInsideStatBox",children:[Object(g.jsxs)("p",{children:[Object(g.jsx)("b",{children:"Mood: "})," ",J(e.allMoods)]}),Object(g.jsx)("br",{}),Object(g.jsxs)("p",{children:[Object(g.jsx)("b",{children:"Tags: "})," ",z(e.allMoods,"allTime")]})]})]})}var K=function(e){Object(O.a)(a,e);var t=Object(v.a)(a);function a(e){var o;return Object(f.a)(this,a),(o=t.call(this,e)).handleTimeRangeClicked=function(e){o.setState({timeRange:e.target.value},o.getGraphData)},o.removeLineAddBar=function(){o.setState({lineClicked:!1,barClicked:!0})},o.removeBarAddLine=function(){o.setState({barClicked:!1,lineClicked:!0})},o.setGraphBackBtnClicked=function(){o.setState({graphBackBtnClicked:!0})},o.addDynamicGraphColoring=function(){for(var e=[],t=o.getLabelsAndDataForTimeRange().data.datasets.data,a=0;a<t.length;a++)0===t[a]?e.push("white"):t[a]>0&&t[a]<1.5?e.push("#7FBEF9"):t[a]>=1.5&&t[a]<2.5?e.push("#BBDDFB"):t[a]>=2.5&&t[a]<3.5?e.push("#FFE457"):t[a]>=3.5&&t[a]<4.5?e.push("#FFD954"):t[a]>=4.5&&t[a]<6&&e.push("#F8C144");return e},o.addGraphGradient=function(){var e=document.getElementById("lineChart").getContext("2d").createLinearGradient(0,0,0,400);return e.addColorStop(0,"rgba(255, 240, 164, 1)"),e.addColorStop(1,"rgba(255, 255, 255, 0) 0)"),e},o.getDaysInMonth=function(){for(var e=new Date,t=new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),a=[],o=1;o<=t;o++)a.push(o);return a},o.getWeekData=function(e,t,a){for(var o=new Date,s=[],n=[],r=[],d=[],c=[],i=0;i<7;i++){var l=o.getDate()-o.getDay()+i,g=new Date(o.setDate(l)).toISOString().slice(0,10);n.push(g),s.push(0),d.push(""),c.push("")}for(var h=0;h<e.length;h++)for(var p=0;p<n.length;p++)e[h].date===n[p]&&r.push(p);for(var u=0;u<r.length;u++)for(var b=0;b<n.length;b++)r[u]===b&&(s.splice(b,1,e[u].feeling),d.splice(b,1,e[u].explanation),c.splice(b,1,e[u].tags));return"exp"===t?d[a]:"tags"===t?c[a].join(", "):"feelings"===t?s:void 0},o.getMonthData=function(e,t,a){for(var o=(new Date).getMonth(),s=(new Date).getFullYear(),n=new Date(s,o,1),r=[],d=[],c=[],i=[],l=[];n.getMonth()===o;)r.push(n.toISOString().slice(0,10)),n.setDate(n.getDate()+1),c.push(0),i.push(""),l.push("");for(var g=0;g<e.length;g++)for(var h=0;h<r.length;h++)e[g].date===r[h]&&d.push(h);for(var p=0;p<d.length;p++)for(var u=0;u<r.length;u++)d[p]===u&&(c.splice(u,1,e[p].feeling),i.splice(u,1,e[p].explanation),l.splice(u,1,e[p].tags));return"exp"===t?i[a]:"tags"===t?l[a].join(", "):"feelings"===t?c:void 0},o.getYearlyAverages=function(e,t,a){for(var s=(new Date).getFullYear(),n=new Date(s,0,1),r=[],d=[],c=[],i=[],l=[],g=0,h=0,p=0,u=[],b=[],j=0;n.getYear()+1900===s;)r.push(n.toISOString().slice(0,10)),n.setDate(n.getDate()+1),d.push(0),i.push([]);for(var m=0;m<e.length;m++)for(var f=0;f<r.length;f++)e[m].date===r[f]&&c.push(f);for(var x=0;x<c.length;x++)for(var M=0;M<r.length;M++)c[x]===M&&(d.splice(M,1,e[x].feeling),i.splice(M,1,e[x].tags));for(;n.getMonth()===g;)h+=d[p],u.push(i[p]),0!==d[++p]&&j++,n.setDate(n.getDate()+1),n.getMonth()!==g&&(g++,0!==h?(l.push(h/j),b.push(u)):(l.push(h/o.getDaysInMonth().length),b.push("")),u=[],j=0,h=0,u=[]);return"tags"===t?z(e,b[a]):l},o.getLabelsAndDataForTimeRange=function(){var e;return"week"===o.state.timeRange?e={labels:["Sun","Mon","Tues","Wed","Thurs","Fri","Sat"],datasets:{data:o.getWeekData(o.props.allMoods,"feelings")}}:"month"===o.state.timeRange?e={labels:o.getDaysInMonth(),datasets:{data:o.getMonthData(o.props.allMoods,"feelings")}}:"year"===o.state.timeRange&&(e={labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:{data:o.getYearlyAverages(o.props.allMoods)}}),{data:e}},o.breakString=function(e,t){for(var a="",o=0,s=0;o<e.length;o++)s>=t&&" "===e[o]?(s=0,a+="\n"):(s++,a+=e[o]);return a},o.getNotesAndTagsOnGraphHover=function(e){var t,a=o.props.allMoods,s=o.state.timeRange;if("week"===s){var n=o.getWeekData(a,"exp",e[0].dataIndex),r=o.getWeekData(a,"tags",e[0].dataIndex);t="Mood: "+H(Math.round(e[0].raw))+(n?" \nNotes: "+o.breakString(n,33):"")+(r?" \nTags: "+o.breakString(r,30):"")}else if("month"===s){var d=o.getMonthData(a,"exp",e[0].dataIndex),c=o.getMonthData(a,"tags",e[0].dataIndex);t="Mood: "+H(Math.round(e[0].raw))+(d?" \nNotes: "+o.breakString(d,33):"")+(c?" \nTags: "+o.breakString(c,30):"")}else"year"===s&&(t="Mood average: "+H(Math.round(e[0].raw))+" \nMost common tag: "+o.getYearlyAverages(a,"tags",e[0].dataIndex));return t},o.getGraphData=function(){var e=o.getLabelsAndDataForTimeRange().data.labels,t=o.getLabelsAndDataForTimeRange().data.datasets.data,a=Object(M.a)(o),s={plugins:{legend:{display:!1},tooltip:{callbacks:{title:function(e,t){return a.getNotesAndTagsOnGraphHover(e)},label:function(e,t){}},backgroundColor:"#484848",padding:"7",xAlign:"left"}},scales:{y:{display:!1,min:.8,max:5.23,ticks:{display:!1,stepSize:1}},x:{ticks:{color:"black",font:{size:11}},grid:{display:!1}}}};o.setState({graphData:{data:{labels:e,datasets:[{data:t,fill:!0,backgroundColor:o.addGraphGradient(),borderColor:"#ededed",borderWidth:1,pointBackgroundColor:o.addDynamicGraphColoring(),pointBorderColor:"transparent",pointRadius:7,pointHoverRadius:6}]},barData:{labels:e,datasets:[{data:t,backgroundColor:o.addDynamicGraphColoring(),border:!1}]},options:s}})},o.state={graphData:{},timeRange:"week",lineClicked:!0,barClicked:!1,graphBackBtnClicked:!1},o}return Object(x.a)(a,[{key:"componentDidMount",value:function(){var e=Object(m.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.props.mood.feeling){e.next=3;break}return e.next=3,this.props.pushMoodToDb();case 3:if(0!==this.props.allMoods.length){e.next=6;break}return e.next=6,this.props.fetchData();case 6:this.getGraphData();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.setState=function(e,t){}}},{key:"render",value:function(){return Object(g.jsx)(g.Fragment,{children:this.state.graphBackBtnClicked?0===this.props.mood.feeling?Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(q,{mood:this.props.mood,getExp:this.props.getExp,getTags:this.props.getTags,pageTransition:this.props.pageTransition,pageVariants:this.props.pageVariants,getMoodClicked:this.props.getMoodClicked,dateMoodWasLastEntered:this.props.dateMoodWasLastEntered,allMoods:this.props.allMoods,addToAllMoods:this.props.addToAllMoods,fetchData:this.props.fetchData,pushMoodToDb:this.props.pushMoodToDb,removeAllMoods:this.props.removeAllMoods,db:this.props.db,updateShowMood:this.props.updateShowMood,showMood:this.props.showMood})}):Object(g.jsx)(Q,{mood:this.props.mood,getExp:this.props.getExp,getTags:this.props.getTags,pageTransition:this.props.pageTransition,pageVariants:this.props.pageVariants,getMoodClicked:this.props.getMoodClicked,dateMoodWasLastEntered:this.props.dateMoodWasLastEntered,allMoods:this.props.allMoods,addToAllMoods:this.props.addToAllMoods,fetchData:this.props.fetchData,pushMoodToDb:this.props.pushMoodToDb,removeAllMoods:this.props.removeAllMoods,db:this.props.db,updateShowMood:this.props.updateShowMood,showMood:this.props.showMood}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{onClick:this.setGraphBackBtnClicked,children:Object(g.jsx)(R,{})}),Object(g.jsxs)("div",{className:"graph",children:[Object(g.jsxs)("div",{className:"graphHeaderContainer",children:[Object(g.jsx)("h1",{children:"Your mood over time with Shimmer"}),Object(g.jsx)(P,{allMoods:this.props.allMoods}),Object(g.jsxs)("div",{className:"buttonContainer",children:[Object(g.jsx)("button",{value:"week",onClick:this.handleTimeRangeClicked,className:"week",children:"Week"}),Object(g.jsx)("button",{value:"month",onClick:this.handleTimeRangeClicked,className:"month",children:"Month"}),Object(g.jsx)("button",{value:"year",onClick:this.handleTimeRangeClicked,className:"year",children:"Year"})]})]}),Object(g.jsxs)("div",{className:this.state.lineClicked?"graphHolder":"hidden",children:[Object(g.jsxs)("div",{className:"graphColOfFaces",children:[Object(g.jsx)("img",{alt:"cartoon face",src:N}),Object(g.jsx)("img",{alt:"cartoon face",src:A}),Object(g.jsx)("img",{alt:"cartoon face",src:S}),Object(g.jsx)("img",{alt:"cartoon face",src:E}),Object(g.jsx)("img",{alt:"cartoon face",src:y})]}),Object(g.jsx)(G.b,{className:"graphs",id:"lineChart",data:this.state.graphData.data,options:this.state.graphData.options})]}),Object(g.jsxs)("div",{className:this.state.barClicked?"graphHolder":"hidden",children:[Object(g.jsxs)("div",{className:"graphColOfFaces",children:[Object(g.jsx)("img",{alt:"cartoon face",src:N}),Object(g.jsx)("img",{alt:"cartoon face",src:A}),Object(g.jsx)("img",{alt:"cartoon face",src:S}),Object(g.jsx)("img",{alt:"cartoon face",src:E}),Object(g.jsx)("img",{alt:"cartoon face",src:y})]}),Object(g.jsx)(G.a,{id:"barChart",className:"graphs",data:this.state.graphData.barData,options:this.state.graphData.options})]}),Object(g.jsx)("img",{onClick:this.removeLineAddBar,alt:"switch graph btn",className:"switchGraphLine",src:V}),Object(g.jsx)("img",{onClick:this.removeBarAddLine,alt:"switch graph btn",className:"switchGraphBar",src:U})]})]})})}}]),a}(o.Component);function Q(e){var t=e.mood.tags,a=Object(o.useState)(!1),s=Object(c.a)(a,2),n=s[0],r=s[1];return Object(g.jsx)(g.Fragment,{children:e.showMood?n?Object(g.jsx)(K,{allMoods:e.allMoods,pageTransition:e.pageTransition,pageVariants:e.pageVariants,mood:e.mood,addToAllMoods:e.addToAllMoods,fetchData:e.fetchData,pushMoodToDb:e.pushMoodToDb,removeAllMoods:e.removeAllMoods,getExp:e.getExp,getMoodClicked:e.getMoodClicked,getTags:e.getTags,db:e.db,date:e.mood.date,dateMoodWasLastEntered:e.dateMoodWasLastEntered,updateShowMood:e.updateShowMood,showMood:e.showMood}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(L,{}),Object(g.jsx)("div",{onClick:function(){return e.updateShowMood(!1)},children:Object(g.jsx)(R,{})}),Object(g.jsxs)(B.a.div,{className:"moodExp",initial:"out",animate:"in",exit:"outFade",transition:e.pageTransition,variants:e.pageVariants,children:[0!==e.mood.feeling&&3!==e.mood.feeling?4===e.mood.feeling||5===e.mood.feeling?Object(g.jsx)("h1",{children:"Awesome! What's on your mind?"}):Object(g.jsx)("h1",{children:"Oh no, what's on your mind?"}):Object(g.jsx)("h1",{children:"What's on your mind?"}),Object(g.jsxs)("div",{className:"btnTags",children:[Object(g.jsxs)("button",{onClick:e.getTags,className:t.includes("Work")?"tags workClicked":"tags",value:"Work",children:[Object(g.jsx)(W,{symbol:"\ud83d\udcc6"})," Work"]}),Object(g.jsxs)("button",{onClick:e.getTags,className:t.includes("Family")?"tags famClicked":"tags",value:"Family",children:[Object(g.jsx)(W,{symbol:"\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67"})," Family"]}),Object(g.jsxs)("button",{onClick:e.getTags,className:t.includes("Relationship")?"tags relClicked":"tags",value:"Relationship",children:[Object(g.jsx)(W,{symbol:"\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc69"})," Relationship"]}),Object(g.jsxs)("button",{onClick:e.getTags,className:t.includes("Friends")?"tags friClicked":"tags",value:"Friends",children:[Object(g.jsx)(W,{symbol:"\ud83d\udc6f\u200d\u2640\ufe0f"})," Friends"]}),Object(g.jsxs)("button",{onClick:e.getTags,className:t.includes("Health")?"tags healthClicked":"tags",value:"Health",children:[Object(g.jsx)(W,{symbol:"\ud83d\ude37"})," Health"]}),Object(g.jsxs)("button",{onClick:e.getTags,className:t.includes("Exercise")?"tags exClicked":"tags",value:"Exercise",children:[Object(g.jsx)(W,{symbol:"\ud83d\udeb4"})," Exercise"]}),Object(g.jsxs)("button",{onClick:e.getTags,className:t.includes("Travel")?"tags travClicked":"tags",value:"Travel",children:[Object(g.jsx)(W,{symbol:"\ud83c\udfdd"})," Travel"]}),Object(g.jsxs)("button",{onClick:e.getTags,className:t.includes("Mindfulness")?"tags mindClicked":"tags",value:"Mindfulness",children:[Object(g.jsx)(W,{symbol:"\ud83e\udde0"})," Mindfulness"]}),Object(g.jsxs)("button",{onClick:e.getTags,className:t.includes("Food")?"tags foodClicked":"tags",value:"Food",children:[Object(g.jsx)(W,{symbol:"\ud83c\udf2e"})," Food"]}),Object(g.jsxs)("button",{onClick:e.getTags,className:t.includes("Education")?"tags eduClicked":"tags",value:"Education",children:[Object(g.jsx)(W,{symbol:"\ud83d\udcda"})," Education"]})]}),Object(g.jsx)("input",{onChange:e.getExp,placeholder:"Add any notes you'd like!",className:"whyMood",name:"whyMood",autoComplete:"off"}),Object(g.jsx)("br",{}),Object(g.jsx)("button",{onClick:function(){return r(!0)},type:"submit",children:"Submit"})]})]}):Object(g.jsx)(q,{mood:e.mood,getExp:e.getExp,getTags:e.getTags,getMoodClicked:e.getMoodClicked,date:e.mood.date,dateMoodWasLastEntered:e.dateMoodWasLastEntered,allMoods:e.allMoods,addToAllMoods:e.addToAllMoods,fetchData:e.fetchData,pushMoodToDb:e.pushMoodToDb,removeAllMoods:e.removeAllMoods,db:e.db,pageTransition:e.pageTransition,pageVariants:e.pageVariants,updateShowMood:e.updateShowMood,showMood:e.showMood})})}function q(e){var t=Object(o.useContext)(h).currentUser;return Object(g.jsx)(g.Fragment,{children:e.showMood&&0!==e.mood.feeling?Object(g.jsx)(Q,{mood:e.mood,getExp:e.getExp,getTags:e.getTags,pageTransition:e.pageTransition,pageVariants:e.pageVariants,getMoodClicked:e.getMoodClicked,dateMoodWasLastEntered:e.dateMoodWasLastEntered,allMoods:e.allMoods,addToAllMoods:e.addToAllMoods,fetchData:e.fetchData,pushMoodToDb:e.pushMoodToDb,db:e.db,removeAllMoods:e.removeAllMoods,updateShowMood:e.updateShowMood,showMood:e.showMood}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(L,{}),Object(g.jsxs)("div",{className:"selectMood",children:[Object(g.jsxs)("h1",{className:"welcome",children:["Welcome back"," ",t?t.email.substring(0,t.email.lastIndexOf("@")):":)"," ",Object(g.jsx)("br",{})," How are you feeling today?"]}),Object(g.jsx)("img",{className:"sad",alt:"sad face",id:1,onClick:e.getMoodClicked,src:y}),Object(g.jsx)("img",{className:"nw",alt:"not well face",id:2,onClick:e.getMoodClicked,src:E}),Object(g.jsx)("img",{className:"neutral",alt:"neutral face",id:3,onClick:e.getMoodClicked,src:S}),Object(g.jsx)("img",{className:"happy",alt:"happy face",id:4,onClick:e.getMoodClicked,src:A}),Object(g.jsx)("img",{className:"jub",alt:"jubilant face",id:5,onClick:e.getMoodClicked,src:N})]})]})})}function X(e){return Object(o.useEffect)((function(){e.fetchLastDateEntered()}),[]),Object(g.jsx)(g.Fragment,{children:e.mood.date===e.dateMoodWasLastEntered?Object(g.jsx)(K,{allMoods:e.allMoods,pageTransition:e.pageTransition,pageVariants:e.pageVariants,mood:e.mood,addToAllMoods:e.addToAllMoods,fetchData:e.fetchData,pushMoodToDb:e.pushMoodToDb,removeAllMoods:e.removeAllMoods,getExp:e.getExp,getMoodClicked:e.getMoodClicked,getTags:e.getTags,db:e.db,dateMoodWasLastEntered:e.dateMoodWasLastEntered,showMood:e.showMood,updateShowMood:e.updateShowMood}):Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(q,{mood:e.mood,getExp:e.getExp,getTags:e.getTags,getMoodClicked:e.getMoodClicked,dateMoodWasLastEntered:e.dateMoodWasLastEntered,allMoods:e.allMoods,addToAllMoods:e.addToAllMoods,fetchData:e.fetchData,pushMoodToDb:e.pushMoodToDb,removeAllMoods:e.removeAllMoods,pageTransition:e.pageTransition,pageVariants:e.pageVariants,db:e.db,showMood:e.showMood,updateShowMood:e.updateShowMood})})})}K.contextType=h;var Z={in:{opacity:1,x:0},out:{opacity:0,x:"-100vw"},outRight:{opacity:0,x:"100vw"},outFade:{opacity:0}},$={transition:"linear",duration:.3},_=l.firestore(),ee=function(e){Object(O.a)(a,e);var t=Object(v.a)(a);function a(e){var o;return Object(f.a)(this,a),(o=t.call(this,e)).pushMoodToDb=Object(m.a)(j.a.mark((function e(){var t,a,s,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.context.currentUser){e.next=16;break}return t=o.state,a=Object(M.a)(o),s=_.collection("moodTracker").doc(o.context.currentUser.uid),e.next=6,s.get().then((function(e){e.exists?(n=e.data().todaysMoodDocId,o.updateLastDateMoodEntered(e.data().lastDateEntered)):(s.set({todaysMoodDocId:"",lastDateEntered:t.mood.date}),n="",o.updateLastDateMoodEntered("no date"))}));case 6:if(t.mood.date===t.dateMoodWasLastEntered&&""!==n){e.next=11;break}return e.next=9,s.collection("date").add({feeling:t.mood.feeling,explanation:t.mood.explanation,setMoodForToday:!0,tags:t.mood.tags,date:t.mood.date}).then((function(e){n=e.id,a.updateLastDateMoodEntered(t.mood.date),s.set({todaysMoodDocId:n,lastDateEntered:t.mood.date})})).catch((function(e){console.error("Error adding document: ",e)}));case 9:e.next=16;break;case 11:return o.removeAllMoods(),e.next=14,s.collection("date").doc(n).update({feeling:o.state.mood.feeling,explanation:o.state.mood.explanation,tags:o.state.mood.tags});case 14:return e.next=16,o.fetchData();case 16:case"end":return e.stop()}}),e)}))),o.fetchData=Object(m.a)(j.a.mark((function e(){var t,a,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.context.currentUser,!(a=t?_.collection("moodTracker").doc(t.uid).collection("date"):null)){e.next=9;break}return e.next=5,a.orderBy("date","desc").get();case 5:if(!(s=e.sent).empty){e.next=8;break}return e.abrupt("return");case 8:s.forEach((function(e){o.addToAllMoods(e.data())}));case 9:case"end":return e.stop()}}),e)}))),o.fetchLastDateEntered=Object(m.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.context.currentUser){e.next=4;break}return t=Object(M.a)(o),e.next=4,_.collection("moodTracker").doc(t.context.currentUser.uid).get().then((function(e){e.exists&&t.updateLastDateMoodEntered(e.data().lastDateEntered)}));case 4:case"end":return e.stop()}}),e)}))),o.getUserEmail=function(e){o.setState({email:e.target.value})},o.getMoodClicked=function(e){o.setState({mood:Object(u.a)(Object(u.a)({},o.state.mood),{},{feeling:parseFloat(e.target.id),key:Date.now()})}),o.updateShowMood(!0)},o.getExp=function(e){o.setState({mood:Object(u.a)(Object(u.a)({},o.state.mood),{},{explanation:e.target.value})})},o.removeTag=function(e){o.setState({mood:Object(u.a)(Object(u.a)({},o.state.mood),{},{tags:o.state.mood.tags.filter((function(t){return t!==e.target.value}))})})},o.removeAllMoods=function(){o.setState({allMoods:[]})},o.getTags=function(e){o.state.mood.tags.includes(e.target.value)?o.removeTag(e):o.setState({mood:Object(u.a)(Object(u.a)({},o.state.mood),{},{tags:o.state.mood.tags.concat(e.target.value)})})},o.addToAllMoods=function(e){o.setState({allMoods:o.state.allMoods.concat(e)})},o.updateLastDateMoodEntered=function(){var e=Object(m.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.setState({dateMoodWasLastEntered:t});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o.updateShowMood=function(e){o.setState({showMood:e})},o.state={mood:{feeling:0,explanation:"",tags:[],key:"",date:""},allMoods:[],email:"",password:"",dateMoodWasLastEntered:"",showMood:!0},o}return Object(x.a)(a,[{key:"componentDidMount",value:function(){var e=Object(m.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchLastDateEntered();case 2:t=6e4*(new Date).getTimezoneOffset(),this.setState({mood:Object(u.a)(Object(u.a)({},this.state.mood),{},{date:new Date(Date.now()-t).toISOString().slice(0,10)})});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(g.jsx)("div",{className:"mood-tracker",children:Object(g.jsx)(T.a,{children:Object(g.jsx)(d.a,{children:Object(g.jsxs)(k.d,{children:[Object(g.jsx)(k.b,{exact:!0,path:"/",render:function(t){return Object(g.jsx)(X,Object(u.a)({mood:e.state.mood,getExp:e.getExp,getTags:e.getTags,getMoodClicked:e.getMoodClicked,date:e.state.mood.date,dateMoodWasLastEntered:e.state.dateMoodWasLastEntered,allMoods:e.state.allMoods,pageTransition:$,pageVariants:Z,addToAllMoods:e.addToAllMoods,fetchData:e.fetchData,pushMoodToDb:e.pushMoodToDb,removeAllMoods:e.removeAllMoods,db:_,fetchLastDateEntered:e.fetchLastDateEntered,updateShowMood:e.updateShowMood,showMood:e.state.showMood},t))}}),Object(g.jsx)(k.b,{exact:!0,path:"/home",component:D}),Object(g.jsx)(k.b,{exact:!0,path:"/login",component:w}),Object(g.jsx)(k.b,{exact:!0,path:"/signup",render:function(t){return Object(g.jsx)(C,Object(u.a)({getUserEmail:e.getUserEmail,db:_,email:e.state.email},t))}})]})})})})}}]),a}(o.Component);ee.contextType=h,r.a.render(Object(g.jsx)(d.a,{children:Object(g.jsx)(p,{children:Object(g.jsx)(ee,{})})}),document.getElementById("root"))}},[[235,1,2]]]);
//# sourceMappingURL=main.943fa6ee.chunk.js.map